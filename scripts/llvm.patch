--- test.sh	2022-03-09 19:53:46.756432700 +0300
+++ llvm.sh	2022-03-09 19:51:36.973247600 +0300
@@ -3,7 +3,8 @@
 init()
 {
 	exit_code=1
-	vm_exec=export.txt
+	vm_exec=export.ll
+	llvm_exec=export
 
 	vm_release=master
 	output_time=0.0
@@ -22,6 +23,7 @@
 	subdir_error=errors
 	subdir_warning=warnings
 	subdir_include=include
+	subdir_no_llvm=no-llvm
 
 	while ! [[ -z $1 ]]
 	do
@@ -186,9 +188,9 @@
 		compiler_debug=$compiler
 	fi
 
-	if [[ -z $ignore ]] ; then
-		build_vm
-	fi
+	# if [[ -z $ignore ]] ; then
+	# 	build_vm
+	# fi
 }
 
 run()
@@ -269,7 +271,7 @@
 {
 	if [[ $path == $dir_exec/* ]] ; then
 		action="execution"
-		run $interpreter $interpreter_debug $vm_exec
+		run $llvm_exec $llvm_exec
 
 		case $? in
 			0)
@@ -334,7 +336,7 @@
 {
 	# в unsorted проверяется только наличие ошибки. multiple_errors и preprocessor здесь временно
 	if [[ $path == */$subdir_warning/* || $path == $dir_unsorted/* || $dir_multiple_errors/* || 
-		$path == $dir_preprocessor/* ]] ; then
+		$path == $dir_preprocessor/* || $path == */$subdir_no_llvm/* ]] ; then
 		message_success
 		let success++
 	else
@@ -379,14 +381,14 @@
 compiling()
 {
 	if [[ -z $ignore || $path != $dir_lexing/* || $path != $dir_preprocessor/* || $path != $dir_semantics/* 
-		|| $path != $dir_syntax/* || $path != $dir_multiple_errors/* || $path != $dir_unsorted/* ]] ; then
+		|| $path != $dir_syntax/* || $path != $dir_multiple_errors/* || $path != $dir_unsorted/* || $path != */$subdir_no_llvm/* ]] ; then
 		action="compiling"
-		run $compiler $compiler_debug $sources -o $vm_exec -VM
+		run $compiler $compiler_debug $sources -LLVM -o $vm_exec && clang++ $vm_exec -o $llvm_exec &>$log
 
 		case $? in
 			0)
 				if [[ $path == $dir_lexing/* || $path == $dir_preprocessor/* || $path == $dir_semantics/* 
-					|| $path == $dir_syntax/* || $path == $dir_multiple_errors/* || $path == $dir_unsorted/* ]] ; then
+					|| $path == $dir_syntax/* || $path == $dir_multiple_errors/* || $path == $dir_unsorted/* || $path == */$subdir_no_llvm/* ]] ; then
 					message_failure
 					let failure++
 				else
@@ -412,7 +414,7 @@
 				;;
 			$exit_code)
 				if [[ $path == $dir_lexing/* || $path == $dir_preprocessor/* || $path == $dir_semantics/* 
-					|| $path == $dir_syntax/* || $path == $dir_multiple_errors/* || $path == $dir_unsorted/* ]] ; then
+					|| $path == $dir_syntax/* || $path == $dir_multiple_errors/* || $path == $dir_unsorted/* || $path == */$subdir_no_llvm/* ]] ; then
 					if [[ $build_type == "(Debug)" ]] ; then
 						build_type=""
 
